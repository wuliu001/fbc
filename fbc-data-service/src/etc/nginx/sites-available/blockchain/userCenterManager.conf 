location = /user_center/insert {
    set_by_lua $kkk '
        local kkk;
        local u = ngx.var.arg_user or "";
        local body = ngx.var.arg_body or "";
        local oo = "&o=code&o=message&pi=2";
        local m = ngx.var.request_method or ""; -- HTTP method
        local I = "&i=";
        if (m=="POST") then
            kkk = "&n=`user_center`.`register`"..I..u..I..body..oo;
        end;
        return kkk;
    ';
    proxy_pass http://userCenter_backend/mysql/proc?f=jdct$kkk;
}

location = /user_center/login {
    set_by_lua $kkk '
        local kkk;
        local un = ngx.var.arg_userAccount or "";
        local pw = ngx.var.arg_body or "";
        local oo = "&o=code&o=message&pi=2";
        local m = ngx.var.request_method or ""; -- HTTP method
        local I = "&i=";
        if (m=="POST") then
            kkk = "&n=`user_center`.`login`"..I..un..I..pw..oo;
        end;
        return kkk;
    ';
    proxy_pass http://userCenter_backend/mysql/proc?f=jdct$kkk;
}

location ~ "^/user_center/([^/]+)$" {
    set $user $1;
    set_by_lua $kkk '
        local kkk;
        local u = ngx.var.user or "";
        local body = ngx.var.arg_body or "";
        local oo = "&o=code&o=message&pi=2";
        local m = ngx.var.request_method or ""; -- HTTP method
        local I = "&i=";
        if (m=="PUT") then
            kkk = "&n=`user_center`.`change_pw`"..I..u..I..body..oo;
        end;
        return kkk;
    ';
    proxy_pass http://userCenter_backend/mysql/proc?f=jdct$kkk;
}

